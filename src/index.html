<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M36 Leak Detector</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Úvodní obrazovka pro načtení karty -->
    <div id="cardReaderScreen" class="fullscreen-overlay">
        <div class="card-reader-dialog">
            <h1>M36</h1>
            <p>Naskenujte kartu</p>
            <div class="loading-indicator"></div>
        </div>
    </div>

    <!-- Hlavní pracovní obrazovka -->
    <div id="mainScreen" class="main-screen" style="display: none;">
        <!-- Hlavička -->
        <header class="header">
            <div class="header-left">
                <button id="refreshBtn" class="icon-btn" title="Refresh zakázek">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z"/>
                    </svg>
                </button>
                <select id="orderSelect" class="order-select">
                    <option value="">Vyberte zakázku...</option>
                </select>
            </div>

            <!-- Informace o zakázce -->
            <div id="orderInfo" class="order-info" style="display: none;">
                <div class="order-details">
                    <span id="orderNumber"></span>
                    <span id="orderType"></span>
                    <span id="orderPCN"></span>
                </div>
            </div>

            <div class="header-right">
                <button id="printBtn" class="icon-btn" title="Tisk etiket" style="display: none;">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M18,3H6V7H18M19,12A1,1 0 0,1 18,11A1,1 0 0,1 19,10A1,1 0 0,1 20,11A1,1 0 0,1 19,12M16,19H8V14H16M19,8H5A3,3 0 0,0 2,11V17H6V21H18V17H22V11A3,3 0 0,0 19,8Z"/>
                    </svg>
                </button>
                <div class="user-info">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z"/>
                    </svg>
                    <span id="userName" class="user-name">Uživatel</span>
                </div>
            </div>
        </header>

        <!-- Hlavní obsah -->
        <main class="main-content">
            <!-- Tabulka výrobků -->
            <div id="productsTable" class="products-container">
                <table class="products-table">
                    <thead>
                        <tr>
                            <th>Číslo dílu</th>
                            <th>Funkční test</th>
                            <th>He-test</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="productsTableBody">
                        <!-- Dynamicky generované řádky -->
                    </tbody>
                </table>
            </div>

            <!-- Oblast pro test průsaku -->
            <div id="testArea" class="test-area" style="display: none;">
                <div class="test-header">
                    <h3>He-test probíhá...</h3>
                    <div id="barcodeLabel" class="barcode-display"></div>
                </div>
                <div class="test-data">
                    <div id="testInfo" class="test-info"></div>
                    <div class="test-values">
                        <div class="value-item">
                            <label>Nastavená hodnota:</label>
                            <span id="setpointValue">-</span>
                        </div>
                        <div class="value-item">
                            <label>Aktuální únos:</label>
                            <span id="currentLeak">-</span>
                        </div>
                        <div class="value-item">
                            <label>Průměr (5 vzorků):</label>
                            <span id="averageLeak">-</span>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Dialogové okno pro tisk -->
    <div id="printDialog" class="modal" style="display: none;">
        <div class="modal-content">
            <h3>Tisk etiket</h3>
            <div class="print-options">
                <button id="printAllBtn" class="btn primary">Tisknout celou zakázku</button>
                <div class="single-print">
                    <select id="singlePartSelect" class="part-select">
                        <option value="">Vyberte díl pro jednotlivý tisk...</option>
                    </select>
                    <button id="printSingleBtn" class="btn secondary" disabled>Tisknout vybraný díl</button>
                </div>
            </div>
            <div class="modal-actions">
                <button id="closePrintDialog" class="btn cancel">Zrušit</button>
            </div>
        </div>
    </div>

    <!-- Skrytá pole pro sériový port -->
    <textarea id="SerialPortData" style="display: none;"></textarea>
    <input type="hidden" id="hiddSerial">

    <script src="renderer.js"></script>
</body>
</html>
